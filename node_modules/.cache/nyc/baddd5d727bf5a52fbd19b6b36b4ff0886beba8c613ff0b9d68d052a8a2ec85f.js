var cov_2fqx9jx3il=function(){var path="/home/angel/GA/ecommerce/models/user.js";var hash="0972dc7a6d9b3a0edd36bb7172823c827d8fbbfb";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/angel/GA/ecommerce/models/user.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:15},end:{line:2,column:30}},"2":{start:{line:4,column:12},end:{line:4,column:35}},"3":{start:{line:6,column:15},end:{line:6,column:32}},"4":{start:{line:8,column:16},end:{line:8,column:35}},"5":{start:{line:9,column:20},end:{line:9,column:22}},"6":{start:{line:12,column:19},end:{line:33,column:1}},"7":{start:{line:24,column:16},end:{line:24,column:106}},"8":{start:{line:37,column:0},end:{line:40,column:1}},"9":{start:{line:38,column:18},end:{line:38,column:133}},"10":{start:{line:39,column:4},end:{line:39,column:17}},"11":{start:{line:44,column:0},end:{line:48,column:2}},"12":{start:{line:45,column:15},end:{line:45,column:19}},"13":{start:{line:46,column:4},end:{line:46,column:63}},"14":{start:{line:47,column:4},end:{line:47,column:10}},"15":{start:{line:51,column:13},end:{line:51,column:47}},"16":{start:{line:53,column:0},end:{line:53,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:38},end:{line:25,column:13}},line:23},"1":{name:"(anonymous_1)",decl:{start:{line:37,column:39},end:{line:37,column:40}},loc:{start:{line:37,column:49},end:{line:40,column:1}},line:37},"2":{name:"(anonymous_2)",decl:{start:{line:44,column:23},end:{line:44,column:24}},loc:{start:{line:44,column:39},end:{line:48,column:1}},line:44}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0},b:{},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"0972dc7a6d9b3a0edd36bb7172823c827d8fbbfb"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();const mongoose=(cov_2fqx9jx3il.s[0]++,require('mongoose'));const Schema=(cov_2fqx9jx3il.s[1]++,mongoose.Schema);// get the JWT PrivateKey
const jwt=(cov_2fqx9jx3il.s[2]++,require('jsonwebtoken'));// get the configuration
const config=(cov_2fqx9jx3il.s[3]++,require('config'));// to bcrypt the password
const bcrypt=(cov_2fqx9jx3il.s[4]++,require('bcryptjs'));const saltRounds=(cov_2fqx9jx3il.s[5]++,10);// user schema
const userSchema=(cov_2fqx9jx3il.s[6]++,new Schema({name:{type:String,required:true,lowercase:true},email:{type:String,lowercase:true,required:true,validate:function(email){cov_2fqx9jx3il.f[0]++;cov_2fqx9jx3il.s[7]++;return /^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(email);}},password:{type:String},product:[{type:Schema.Types.ObjectId,ref:'Product'}],order:[{type:Schema.Types.ObjectId,ref:"Order"}]}));// generate token for User
cov_2fqx9jx3il.s[8]++;userSchema.methods.generateAuthToken=function(){cov_2fqx9jx3il.f[1]++;const token=(cov_2fqx9jx3il.s[9]++,jwt.sign({_id:this._id,name:this.name,email:this.email,password:this.password},config.get('jwtPrivateKey')));cov_2fqx9jx3il.s[10]++;return token;};// Bcrypt the Password before saving User Data
cov_2fqx9jx3il.s[11]++;userSchema.pre('save',function(next){cov_2fqx9jx3il.f[2]++;let user=(cov_2fqx9jx3il.s[12]++,this);cov_2fqx9jx3il.s[13]++;user.password=bcrypt.hashSync(user.password,saltRounds);cov_2fqx9jx3il.s[14]++;next();});const User=(cov_2fqx9jx3il.s[15]++,mongoose.model("User",userSchema));cov_2fqx9jx3il.s[16]++;module.exports=User;